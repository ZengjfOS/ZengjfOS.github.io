<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>zengjf</title>

      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/default.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/login.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> 分析文档
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">keystore cts apk build</a></li>
<li><a class="reference internal" href="#id1">参考文档</a></li>
<li><a class="reference internal" href="#build">build</a></li>
<li><a class="reference internal" href="#id2">测试</a></li>
<li><a class="reference internal" href="#challenge">challenge</a></li>
<li><a class="reference internal" href="#testrsaattestation">testRsaAttestation</a></li>
</ul>
</div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">分析文档</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs"> 
<li style="float: right;margin-left: 10px;"><a href="javascript:history.forward()">Forward</a></li>
<li style="float: right;margin-left: 10px;"><a href="javascript:history.back()">Go Back</a> | </li>
<li style="float: right;margin-left: 10px;"><a href="/index.html">Home</a> | </li>

      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="keystore-cts-apk-build">
<h1>keystore cts apk build<a class="headerlink" href="#keystore-cts-apk-build" title="Permalink to this headline"></a></h1>
<p>源代码编译cts apk，便于处理cts测试、分析问题</p>
</section>
<section id="id1">
<h1>参考文档<a class="headerlink" href="#id1" title="Permalink to this headline"></a></h1>
<ul class="simple">
<li><p><a class="reference external" href="https://blog.csdn.net/holdrise/article/details/8448013">Android cts测试命令</a></p></li>
<li><p><a class="reference external" href="https://blog.csdn.net/fchyang/article/details/123920799#:~:text=%E4%BD%BF%E7%94%A8am%20instrument%E9%AA%8C%E8%AF%81CTS%E9%97%AE%E9%A2%98%201%20adb%20install%20%E2%80%9Ccts%20apk%E2%80%9C%EF%BC%8C%E6%AF%94%E5%A6%82CtsMediaV2TestCases%20apk,instrument%20-r%20-e%20class%20%22class_name%23method_name%22%20-w%20%22instrumentation%22%EF%BC%8Cinstrumentation%E5%9C%A8%E6%B5%8B%E8%AF%95apk%E7%9A%84AndroidManifest.xml%E9%87%8C%E6%9C%89%E5%A3%B0%E6%98%8E%E3%80%82%20">使用am instrument验证CTS问题</a></p></li>
</ul>
</section>
<section id="build">
<h1>build<a class="headerlink" href="#build" title="Permalink to this headline"></a></h1>
<ul>
<li><p>source build/envsetup.sh</p></li>
<li><p>lunch [your project]-userdebug</p></li>
<li><p>make cts -j16</p>
<ul class="simple">
<li><p>报错编译不过</p></li>
</ul>
</li>
<li><p>mmm cts/tests/tests/keystore/</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>frameworks/base/core/java/android/os/PackageTagsList.java:111: info: Method can be invoked as a &quot;in&quot; operator from Kotlin: `contains` (this is usually desirable; just make sure it makes sense for this type of object) [KotlinOperator]
[ 97% 1027/1053] //cts/common/device-side/util-axt:compatibility-device-util-axt kotlinc [common]
cts/common/device-side/util-axt/src/com/android/compatibility/common/util/AccessibilityNodeInfoUtils.kt:23:22: warning: &#39;InstrumentationRegistry&#39; is deprecated. Deprecated in Java
import androidx.test.InstrumentationRegistry
                     ^
cts/common/device-side/util-axt/src/com/android/compatibility/common/util/AccessibilityNodeInfoUtils.kt:26:5: warning: &#39;InstrumentationRegistry&#39; is deprecated. Deprecated in Java
    InstrumentationRegistry.getInstrumentation().uiAutomation.rootInActiveWindow
    ^
cts/common/device-side/util-axt/src/com/android/compatibility/common/util/AccessibilityNodeInfoUtils.kt:26:29: warning: &#39;getInstrumentation(): Instrumentation!&#39; is deprecated. Deprecated in Java
    InstrumentationRegistry.getInstrumentation().uiAutomation.rootInActiveWindow
                            ^
cts/common/device-side/util-axt/src/com/android/compatibility/common/util/AccessibilityNodeInfoUtils.kt:39:14: warning: unnecessary safe call on a non-null receiver of type AccessibilityNodeInfo
        child?.depthFirstSearch(condition)?.let { return it }
             ^
cts/common/device-side/util-axt/src/com/android/compatibility/common/util/AccessibilityNodeInfoUtils.kt:58:63: warning: no cast needed
val AccessibilityNodeInfo.textAsString: String? get() = (text as CharSequence?).toString()
                                                              ^
[ 97% 1030/1053] //cts/common/device-side/util-axt:compatibility-device-util-axt javac [common]
cts/common/device-side/util-axt/src/com/android/compatibility/common/util/SystemUtil.java:271: warning: non-varargs call of varargs method with inexact argument type for last parameter;
        runWithShellPermissionIdentity(automan, runnable, null /* permissions */);
                                                          ^
  cast to String for a varargs call
  cast to String[] for a non-varargs call and to suppress this warning
cts/common/device-side/util-axt/src/com/android/compatibility/common/util/BitmapUtils.java:147: warning: non-varargs call of varargs method with inexact argument type for last parameter;
        return (Bitmap) methodGetBitmap.invoke(wallpaperManager, null);
                                                                 ^
  cast to Object for a varargs call
  cast to Object[] for a non-varargs call and to suppress this warning
2 warnings
[100% 1053/1053] Copy: out/host/linux-x86/cts/android-cts/testcases/CtsKeystoreTestCases.apk

#### build completed successfully (03:39 (mm:ss)) ####
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id2">
<h1>测试<a class="headerlink" href="#id2" title="Permalink to this headline"></a></h1>
<ul>
<li><p>adb install out/host/linux-x86/cts/android-cts/testcases/CtsKeystoreTestCases.apk</p></li>
<li><p>adb shell</p>
<ul>
<li><p>pm list instrumentation</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">instrumentation</span><span class="p">:</span><span class="n">android</span><span class="o">.</span><span class="n">keystore</span><span class="o">.</span><span class="n">cts</span><span class="o">/</span><span class="n">androidx</span><span class="o">.</span><span class="n">test</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">AndroidJUnitRunner</span> <span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">android</span><span class="o">.</span><span class="n">keystore</span><span class="o">.</span><span class="n">cts</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>am instrument -e class android.keystore.cts.KeyAttestationTest#testRsaAttestation_DeviceLocked -w -r android.keystore.cts/androidx.test.runner.AndroidJUnitRunner</p>
<ul class="simple">
<li><p>测试单项用例</p></li>
</ul>
</li>
<li><p>am instrument -w -r android.keystore.cts/androidx.test.runner.AndroidJUnitRunner</p>
<ul class="simple">
<li><p>整包测试</p>
<ul>
<li><p>可以用于提取单项测试用例</p></li>
</ul>
</li>
</ul>
</li>
<li><p>am instrument -r -e class android.keystore.cts.KeyAttestationTest -w android.keystore.cts/androidx.test.runner.AndroidJUnitRunner</p>
<ul>
<li><p>运行整个类的测试单元，时间比较久，4分钟</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">INSTRUMENTATION_STATUS_CODE</span><span class="p">:</span> <span class="mi">0</span>
<span class="n">INSTRUMENTATION_STATUS</span><span class="p">:</span> <span class="n">class</span><span class="o">=</span><span class="n">android</span><span class="o">.</span><span class="n">keystore</span><span class="o">.</span><span class="n">cts</span><span class="o">.</span><span class="n">KeyAttestationTest</span>
<span class="n">INSTRUMENTATION_STATUS</span><span class="p">:</span> <span class="n">current</span><span class="o">=</span><span class="mi">14</span>
<span class="n">INSTRUMENTATION_STATUS</span><span class="p">:</span> <span class="nb">id</span><span class="o">=</span><span class="n">AndroidJUnitRunner</span>
<span class="n">INSTRUMENTATION_STATUS</span><span class="p">:</span> <span class="n">numtests</span><span class="o">=</span><span class="mi">15</span>
<span class="n">INSTRUMENTATION_STATUS</span><span class="p">:</span> <span class="n">stream</span><span class="o">=</span>
<span class="n">INSTRUMENTATION_STATUS</span><span class="p">:</span> <span class="n">test</span><span class="o">=</span><span class="n">testRsaAttestation_TooLargeChallenge</span>
<span class="n">INSTRUMENTATION_STATUS_CODE</span><span class="p">:</span> <span class="mi">1</span>
<span class="n">INSTRUMENTATION_STATUS</span><span class="p">:</span> <span class="n">class</span><span class="o">=</span><span class="n">android</span><span class="o">.</span><span class="n">keystore</span><span class="o">.</span><span class="n">cts</span><span class="o">.</span><span class="n">KeyAttestationTest</span>
<span class="n">INSTRUMENTATION_STATUS</span><span class="p">:</span> <span class="n">current</span><span class="o">=</span><span class="mi">14</span>
<span class="n">INSTRUMENTATION_STATUS</span><span class="p">:</span> <span class="nb">id</span><span class="o">=</span><span class="n">AndroidJUnitRunner</span>
<span class="n">INSTRUMENTATION_STATUS</span><span class="p">:</span> <span class="n">numtests</span><span class="o">=</span><span class="mi">15</span>
<span class="n">INSTRUMENTATION_STATUS</span><span class="p">:</span> <span class="n">stream</span><span class="o">=.</span>
<span class="n">INSTRUMENTATION_STATUS</span><span class="p">:</span> <span class="n">test</span><span class="o">=</span><span class="n">testRsaAttestation_TooLargeChallenge</span>
<span class="n">INSTRUMENTATION_STATUS_CODE</span><span class="p">:</span> <span class="mi">0</span>
<span class="n">INSTRUMENTATION_STATUS</span><span class="p">:</span> <span class="n">class</span><span class="o">=</span><span class="n">android</span><span class="o">.</span><span class="n">keystore</span><span class="o">.</span><span class="n">cts</span><span class="o">.</span><span class="n">KeyAttestationTest</span>
<span class="n">INSTRUMENTATION_STATUS</span><span class="p">:</span> <span class="n">current</span><span class="o">=</span><span class="mi">15</span>
<span class="n">INSTRUMENTATION_STATUS</span><span class="p">:</span> <span class="nb">id</span><span class="o">=</span><span class="n">AndroidJUnitRunner</span>
<span class="n">INSTRUMENTATION_STATUS</span><span class="p">:</span> <span class="n">numtests</span><span class="o">=</span><span class="mi">15</span>
<span class="n">INSTRUMENTATION_STATUS</span><span class="p">:</span> <span class="n">stream</span><span class="o">=</span>
<span class="n">INSTRUMENTATION_STATUS</span><span class="p">:</span> <span class="n">test</span><span class="o">=</span><span class="n">testVersionParser</span>
<span class="n">INSTRUMENTATION_STATUS_CODE</span><span class="p">:</span> <span class="mi">1</span>
<span class="n">INSTRUMENTATION_STATUS</span><span class="p">:</span> <span class="n">class</span><span class="o">=</span><span class="n">android</span><span class="o">.</span><span class="n">keystore</span><span class="o">.</span><span class="n">cts</span><span class="o">.</span><span class="n">KeyAttestationTest</span>
<span class="n">INSTRUMENTATION_STATUS</span><span class="p">:</span> <span class="n">current</span><span class="o">=</span><span class="mi">15</span>
<span class="n">INSTRUMENTATION_STATUS</span><span class="p">:</span> <span class="nb">id</span><span class="o">=</span><span class="n">AndroidJUnitRunner</span>
<span class="n">INSTRUMENTATION_STATUS</span><span class="p">:</span> <span class="n">numtests</span><span class="o">=</span><span class="mi">15</span>
<span class="n">INSTRUMENTATION_STATUS</span><span class="p">:</span> <span class="n">stream</span><span class="o">=.</span>
<span class="n">INSTRUMENTATION_STATUS</span><span class="p">:</span> <span class="n">test</span><span class="o">=</span><span class="n">testVersionParser</span>
<span class="n">INSTRUMENTATION_STATUS_CODE</span><span class="p">:</span> <span class="mi">0</span>
<span class="n">INSTRUMENTATION_RESULT</span><span class="p">:</span> <span class="n">stream</span><span class="o">=</span>

<span class="n">Time</span><span class="p">:</span> <span class="mf">228.126</span>

<span class="n">OK</span> <span class="p">(</span><span class="mi">15</span> <span class="n">tests</span><span class="p">)</span>


<span class="n">INSTRUMENTATION_CODE</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>am instrument -r -e class android.keystore.cts.KeyAttestationTest#testRsaAttestation -w android.keystore.cts/androidx.test.runner.AndroidJUnitRunner</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">INSTRUMENTATION_STATUS</span><span class="p">:</span> <span class="n">class</span><span class="o">=</span><span class="n">android</span><span class="o">.</span><span class="n">keystore</span><span class="o">.</span><span class="n">cts</span><span class="o">.</span><span class="n">KeyAttestationTest</span>
<span class="n">INSTRUMENTATION_STATUS</span><span class="p">:</span> <span class="n">current</span><span class="o">=</span><span class="mi">1</span>
<span class="n">INSTRUMENTATION_STATUS</span><span class="p">:</span> <span class="nb">id</span><span class="o">=</span><span class="n">AndroidJUnitRunner</span>
<span class="n">INSTRUMENTATION_STATUS</span><span class="p">:</span> <span class="n">numtests</span><span class="o">=</span><span class="mi">1</span>
<span class="n">INSTRUMENTATION_STATUS</span><span class="p">:</span> <span class="n">stream</span><span class="o">=</span>
<span class="n">android</span><span class="o">.</span><span class="n">keystore</span><span class="o">.</span><span class="n">cts</span><span class="o">.</span><span class="n">KeyAttestationTest</span><span class="p">:</span>
<span class="n">INSTRUMENTATION_STATUS</span><span class="p">:</span> <span class="n">test</span><span class="o">=</span><span class="n">testRsaAttestation</span>
<span class="n">INSTRUMENTATION_STATUS_CODE</span><span class="p">:</span> <span class="mi">1</span>
<span class="n">INSTRUMENTATION_STATUS</span><span class="p">:</span> <span class="n">class</span><span class="o">=</span><span class="n">android</span><span class="o">.</span><span class="n">keystore</span><span class="o">.</span><span class="n">cts</span><span class="o">.</span><span class="n">KeyAttestationTest</span>
<span class="n">INSTRUMENTATION_STATUS</span><span class="p">:</span> <span class="n">current</span><span class="o">=</span><span class="mi">1</span>
<span class="n">INSTRUMENTATION_STATUS</span><span class="p">:</span> <span class="nb">id</span><span class="o">=</span><span class="n">AndroidJUnitRunner</span>
<span class="n">INSTRUMENTATION_STATUS</span><span class="p">:</span> <span class="n">numtests</span><span class="o">=</span><span class="mi">1</span>
<span class="n">INSTRUMENTATION_STATUS</span><span class="p">:</span> <span class="n">stream</span><span class="o">=.</span>
<span class="n">INSTRUMENTATION_STATUS</span><span class="p">:</span> <span class="n">test</span><span class="o">=</span><span class="n">testRsaAttestation</span>
<span class="n">INSTRUMENTATION_STATUS_CODE</span><span class="p">:</span> <span class="mi">0</span>
<span class="n">INSTRUMENTATION_RESULT</span><span class="p">:</span> <span class="n">stream</span><span class="o">=</span>

<span class="n">Time</span><span class="p">:</span> <span class="mf">148.052</span>

<span class="n">OK</span> <span class="p">(</span><span class="mi">1</span> <span class="n">test</span><span class="p">)</span>


<span class="n">INSTRUMENTATION_CODE</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span>
</pre></div>
</div>
<ul class="simple">
<li><p>这个测试要跑很久，因为里面要跑很多中方式的加密</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="challenge">
<h1>challenge<a class="headerlink" href="#challenge" title="Permalink to this headline"></a></h1>
<ul class="simple">
<li><p>参考文档</p>
<ul>
<li><p><a class="reference external" href="https://serverfault.com/questions/266232/what-is-a-challenge-password">What is a challenge password?</a></p>
<ul>
<li><p>The “challenge password” requested as part of the CSR generation, is different from the passphrase used to encrypt the secret key (requested at key generation time, or when a plaintext key is later encrypted - and then requested again each time the SSL-enabled service that uses it starts up).</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://security.stackexchange.com/questions/77028/whats-the-use-of-challenge-password-in-build-key-server-and-build-key-from-easy/77082#77082">What’s the use of challenge password in build-key-server and build-key from Easy-RSA?</a></p></li>
<li><p><a class="reference external" href="https://www.rfc-editor.org/rfc/rfc2985#page-16">5.4.1 Challenge password</a></p></li>
</ul>
</li>
<li><p>是加密、签名用到的随机数，防止有密钥权限的人（但是没有challenge password）私自使用密钥</p></li>
</ul>
</section>
<section id="testrsaattestation">
<h1>testRsaAttestation<a class="headerlink" href="#testrsaattestation" title="Permalink to this headline"></a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">E</span> <span class="pre">keystore2:</span>&#160;&#160;&#160;&#160; <span class="pre">0:</span> <span class="pre">While</span> <span class="pre">generating</span> <span class="pre">Key</span> <span class="pre">without</span> <span class="pre">explicit</span> <span class="pre">attestation</span> <span class="pre">key.</span></code></p>
<ul>
<li><p>自己用的红米手机没有写google key？有点坑</p></li>
</ul>
</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">28.924</span> <span class="mi">30895</span> <span class="mi">30912</span> <span class="n">I</span> <span class="n">TestRunner</span><span class="p">:</span> <span class="n">started</span><span class="p">:</span> <span class="n">testRsaAttestation</span><span class="p">(</span><span class="n">android</span><span class="o">.</span><span class="n">keystore</span><span class="o">.</span><span class="n">cts</span><span class="o">.</span><span class="n">KeyAttestationTest</span><span class="p">)</span>
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">28.926</span> <span class="mi">30895</span> <span class="mi">30912</span> <span class="n">D</span> <span class="n">CtsTestRunListener</span><span class="p">:</span> <span class="n">Total</span> <span class="n">memory</span>  <span class="p">:</span> <span class="mi">268435456</span>
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">28.926</span> <span class="mi">30895</span> <span class="mi">30912</span> <span class="n">D</span> <span class="n">CtsTestRunListener</span><span class="p">:</span> <span class="n">Used</span> <span class="n">memory</span>   <span class="p">:</span> <span class="mi">2701488</span>
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">28.926</span> <span class="mi">30895</span> <span class="mi">30912</span> <span class="n">D</span> <span class="n">CtsTestRunListener</span><span class="p">:</span> <span class="n">Free</span> <span class="n">memory</span>   <span class="p">:</span> <span class="mi">265733968</span>
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">28.926</span> <span class="mi">30895</span> <span class="mi">30912</span> <span class="n">D</span> <span class="n">CtsTestRunListener</span><span class="p">:</span> <span class="n">java</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">tmpdir</span> <span class="ow">is</span><span class="p">:</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">user</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="n">android</span><span class="o">.</span><span class="n">keystore</span><span class="o">.</span><span class="n">cts</span><span class="o">/</span><span class="n">cache</span>
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">28.926</span> <span class="mi">30895</span> <span class="mi">30912</span> <span class="n">D</span> <span class="n">CtsTestRunListener</span><span class="p">:</span> <span class="n">About</span> <span class="n">to</span> <span class="o">.</span><span class="n">exec</span> <span class="n">df</span>
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">28.933</span> <span class="mi">30895</span> <span class="mi">30912</span> <span class="n">D</span> <span class="n">CtsTestRunListener</span><span class="p">:</span> <span class="o">.</span><span class="n">exec</span> <span class="n">returned</span>
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">28.933</span> <span class="mi">30895</span> <span class="mi">30912</span> <span class="n">D</span> <span class="n">CtsTestRunListener</span><span class="p">:</span> <span class="n">Stream</span> <span class="n">reader</span> <span class="n">created</span>
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">28.962</span> <span class="mi">30895</span> <span class="mi">30912</span> <span class="n">D</span> <span class="n">CtsTestRunListener</span><span class="p">:</span> <span class="n">In</span> <span class="k">finally</span>
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">28.962</span> <span class="mi">30895</span> <span class="mi">30912</span> <span class="n">D</span> <span class="n">CtsTestRunListener</span><span class="p">:</span> <span class="n">Now</span> <span class="n">executing</span> <span class="p">:</span> <span class="n">android</span><span class="o">.</span><span class="n">keystore</span><span class="o">.</span><span class="n">cts</span><span class="o">.</span><span class="n">KeyAttestationTest</span>
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">28.963</span> <span class="mi">30895</span> <span class="mi">30912</span> <span class="n">I</span> <span class="n">AndroidKeyStoreTest</span><span class="p">:</span> <span class="n">RSA</span> <span class="n">key</span> <span class="n">attestation</span> <span class="k">with</span><span class="p">:</span> <span class="n">challenge</span> <span class="p">[]</span> <span class="o">/</span> <span class="n">includeValidityDates</span> <span class="n">true</span> <span class="o">/</span> <span class="n">keySize</span> <span class="mi">512</span> <span class="o">/</span> <span class="n">purposes</span> <span class="mi">12</span> <span class="o">/</span> <span class="n">paddingModes</span> <span class="p">[</span><span class="n">PKCS1</span><span class="p">]</span> <span class="o">/</span> <span class="n">devicePropertiesAttestation</span> <span class="n">true</span>
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">29.012</span>   <span class="mi">490</span>   <span class="mi">490</span> <span class="n">I</span> <span class="n">beanpodkeymaster</span><span class="p">:</span> <span class="n">BeanpodKeymaster</span> <span class="n">begin</span> <span class="n">generate</span> <span class="n">key</span>
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">29.087</span>   <span class="mi">468</span>   <span class="mi">468</span> <span class="n">I</span> <span class="p">[</span><span class="n">mTEE</span><span class="p">]</span>  <span class="p">:</span>  <span class="n">come</span> <span class="n">into</span> <span class="n">the</span> <span class="n">TZ_VFS_OPEN</span> <span class="n">function</span>
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">29.091</span>   <span class="mi">468</span>   <span class="mi">468</span> <span class="n">D</span> <span class="p">[</span><span class="n">mTEE</span><span class="p">]</span>  <span class="p">:</span>  <span class="n">pathname</span> <span class="o">=</span> <span class="o">/</span><span class="n">vendor</span><span class="o">/</span><span class="n">thh</span><span class="o">/</span><span class="n">ta</span><span class="o">/</span><span class="n">d91f322ad5a441d5955110eda3272fc0</span><span class="o">.</span><span class="n">ta</span>
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">29.091</span>   <span class="mi">468</span>   <span class="mi">468</span> <span class="n">D</span> <span class="p">[</span><span class="n">mTEE</span><span class="p">]</span>  <span class="p">:</span>  <span class="n">flags</span> <span class="o">=</span> <span class="mi">0</span> <span class="n">mode</span> <span class="o">=</span> <span class="mi">0</span> <span class="n">retval</span> <span class="o">=</span> <span class="mi">5</span>
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">29.093</span>   <span class="mi">468</span>   <span class="mi">468</span> <span class="n">D</span> <span class="p">[</span><span class="n">mTEE</span><span class="p">]</span>  <span class="p">:</span>  <span class="n">come</span> <span class="n">into</span> <span class="n">the</span> <span class="n">TZ_VFS_CLOSE</span> <span class="n">function</span>
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">29.093</span>   <span class="mi">468</span>   <span class="mi">468</span> <span class="n">D</span> <span class="p">[</span><span class="n">mTEE</span><span class="p">]</span>  <span class="p">:</span>  <span class="n">fd</span> <span class="o">=</span> <span class="mi">5</span>
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">29.094</span>   <span class="mi">468</span>   <span class="mi">468</span> <span class="n">D</span> <span class="p">[</span><span class="n">mTEE</span><span class="p">]</span>  <span class="p">:</span>  <span class="n">retVal</span> <span class="o">=</span> <span class="mi">0</span>
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">29.095</span>   <span class="mi">468</span>   <span class="mi">468</span> <span class="n">I</span> <span class="p">[</span><span class="n">mTEE</span><span class="p">]</span>  <span class="p">:</span>  <span class="n">come</span> <span class="n">into</span> <span class="n">the</span> <span class="n">TZ_VFS_OPEN</span> <span class="n">function</span>
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">29.095</span>   <span class="mi">468</span>   <span class="mi">468</span> <span class="n">D</span> <span class="p">[</span><span class="n">mTEE</span><span class="p">]</span>  <span class="p">:</span>  <span class="n">pathname</span> <span class="o">=</span> <span class="o">/</span><span class="n">vendor</span><span class="o">/</span><span class="n">thh</span><span class="o">/</span><span class="n">ta</span><span class="o">/</span><span class="n">d91f322ad5a441d5955110eda3272fc0</span><span class="o">.</span><span class="n">ta</span>
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">29.095</span>   <span class="mi">468</span>   <span class="mi">468</span> <span class="n">D</span> <span class="p">[</span><span class="n">mTEE</span><span class="p">]</span>  <span class="p">:</span>  <span class="n">flags</span> <span class="o">=</span> <span class="mi">0</span> <span class="n">mode</span> <span class="o">=</span> <span class="mi">0</span> <span class="n">retval</span> <span class="o">=</span> <span class="mi">5</span>
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">29.096</span>   <span class="mi">468</span>   <span class="mi">468</span> <span class="n">D</span> <span class="p">[</span><span class="n">mTEE</span><span class="p">]</span>  <span class="p">:</span>  <span class="n">come</span> <span class="n">into</span> <span class="n">the</span> <span class="n">TZ_VFS_LSEEK</span> <span class="n">function</span>
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">29.096</span>   <span class="mi">468</span>   <span class="mi">468</span> <span class="n">D</span> <span class="p">[</span><span class="n">mTEE</span><span class="p">]</span>  <span class="p">:</span>  <span class="n">come</span> <span class="n">into</span> <span class="n">the</span> <span class="n">TZ_VFS_LSEEK</span> <span class="n">function</span>
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">29.097</span>   <span class="mi">468</span>   <span class="mi">468</span> <span class="n">D</span> <span class="p">[</span><span class="n">mTEE</span><span class="p">]</span>  <span class="p">:</span>  <span class="n">come</span> <span class="n">into</span> <span class="n">the</span> <span class="n">TZ_VFS_LSEEK</span> <span class="n">function</span>
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">29.098</span>   <span class="mi">468</span>   <span class="mi">468</span> <span class="n">D</span> <span class="p">[</span><span class="n">mTEE</span><span class="p">]</span>  <span class="p">:</span>  <span class="n">come</span> <span class="n">into</span> <span class="n">the</span> <span class="n">TZ_VFS_READ</span> <span class="n">function</span>
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">29.101</span>   <span class="mi">468</span>   <span class="mi">468</span> <span class="n">D</span> <span class="p">[</span><span class="n">mTEE</span><span class="p">]</span>  <span class="p">:</span>  <span class="n">come</span> <span class="n">into</span> <span class="n">the</span> <span class="n">TZ_VFS_CLOSE</span> <span class="n">function</span>
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">29.101</span>   <span class="mi">468</span>   <span class="mi">468</span> <span class="n">D</span> <span class="p">[</span><span class="n">mTEE</span><span class="p">]</span>  <span class="p">:</span>  <span class="n">fd</span> <span class="o">=</span> <span class="mi">5</span>
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">29.101</span>   <span class="mi">468</span>   <span class="mi">468</span> <span class="n">D</span> <span class="p">[</span><span class="n">mTEE</span><span class="p">]</span>  <span class="p">:</span>  <span class="n">retVal</span> <span class="o">=</span> <span class="mi">0</span>
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">29.145</span>   <span class="mi">468</span>   <span class="mi">468</span> <span class="n">D</span> <span class="p">[</span><span class="n">mTEE</span><span class="p">]</span>  <span class="p">:</span>  <span class="n">come</span> <span class="n">into</span> <span class="n">the</span> <span class="n">TZ_VFS_SETPROP</span> <span class="n">function</span>
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">29.145</span>   <span class="mi">468</span>   <span class="mi">468</span> <span class="n">D</span> <span class="p">[</span><span class="n">mTEE</span><span class="p">]</span>  <span class="p">:</span>  <span class="n">proplength</span> <span class="o">=</span> <span class="mi">9</span>
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">29.145</span>   <span class="mi">468</span>   <span class="mi">468</span> <span class="n">D</span> <span class="p">[</span><span class="n">mTEE</span><span class="p">]</span>  <span class="p">:</span>  <span class="mi">1</span><span class="n">st</span> <span class="n">key</span> <span class="o">=</span> <span class="n">rpmb</span><span class="o">.</span><span class="n">flag</span>
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">29.145</span>   <span class="mi">468</span>   <span class="mi">468</span> <span class="n">D</span> <span class="p">[</span><span class="n">mTEE</span><span class="p">]</span>  <span class="p">:</span>  <span class="mi">2</span><span class="n">nd</span> <span class="n">val</span> <span class="o">=</span> <span class="n">ok</span>
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">29.146</span>   <span class="mi">468</span>   <span class="mi">468</span> <span class="n">D</span> <span class="p">[</span><span class="n">mTEE</span><span class="p">]</span>  <span class="p">:</span>  <span class="n">retVal</span> <span class="o">=</span> <span class="mi">0</span>
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">29.664</span>   <span class="mi">490</span>   <span class="mi">490</span> <span class="n">I</span> <span class="n">beanpodkeymaster</span><span class="p">:</span> <span class="n">cmd</span><span class="p">:</span><span class="mi">0</span> <span class="n">Received</span> <span class="mi">4</span> <span class="n">byte</span> <span class="n">response</span>
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">29.664</span>   <span class="mi">490</span>   <span class="mi">490</span> <span class="n">E</span> <span class="n">beanpodkeymaster</span><span class="p">:</span> <span class="n">Response</span> <span class="n">of</span> <span class="n">size</span> <span class="mi">4</span> <span class="n">contained</span> <span class="n">error</span> <span class="n">code</span> <span class="o">-</span><span class="mi">66</span>
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">29.664</span>   <span class="mi">490</span>   <span class="mi">490</span> <span class="n">E</span> <span class="n">beanpodkeymaster</span><span class="p">:</span> <span class="n">Failed</span> <span class="n">to</span> <span class="n">send</span> <span class="n">cmd</span> <span class="mi">0</span> <span class="n">err</span><span class="p">:</span> <span class="o">-</span><span class="mi">66</span>
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">29.666</span>   <span class="mi">489</span>   <span class="mi">489</span> <span class="n">W</span> <span class="n">BpBinder</span><span class="p">:</span> <span class="n">Slow</span> <span class="n">Binder</span><span class="p">:</span> <span class="n">BpBinder</span> <span class="n">transact</span> <span class="n">took</span> <span class="mi">654</span> <span class="n">ms</span><span class="p">,</span> <span class="n">interface</span><span class="o">=</span><span class="n">android</span><span class="o">.</span><span class="n">hardware</span><span class="o">.</span><span class="n">security</span><span class="o">.</span><span class="n">keymint</span><span class="o">.</span><span class="n">IKeyMintDevice</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="mi">3</span> <span class="n">oneway</span><span class="o">=</span><span class="n">false</span>
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">29.666</span>   <span class="mi">489</span>   <span class="mi">489</span> <span class="n">E</span> <span class="n">keystore2</span><span class="p">:</span> <span class="n">keystore2</span><span class="p">::</span><span class="n">error</span><span class="p">:</span> <span class="n">In</span> <span class="n">generate_key</span><span class="o">.</span>
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">29.666</span>   <span class="mi">489</span>   <span class="mi">489</span> <span class="n">E</span> <span class="n">keystore2</span><span class="p">:</span> 
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">29.666</span>   <span class="mi">489</span>   <span class="mi">489</span> <span class="n">E</span> <span class="n">keystore2</span><span class="p">:</span> <span class="n">Caused</span> <span class="n">by</span><span class="p">:</span>
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">29.666</span>   <span class="mi">489</span>   <span class="mi">489</span> <span class="n">E</span> <span class="n">keystore2</span><span class="p">:</span>     <span class="mi">0</span><span class="p">:</span> <span class="n">While</span> <span class="n">generating</span> <span class="n">Key</span> <span class="n">without</span> <span class="n">explicit</span> <span class="n">attestation</span> <span class="n">key</span><span class="o">.</span>
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">29.666</span>   <span class="mi">489</span>   <span class="mi">489</span> <span class="n">E</span> <span class="n">keystore2</span><span class="p">:</span>     <span class="mi">1</span><span class="p">:</span> <span class="n">Error</span><span class="p">::</span><span class="n">Km</span><span class="p">(</span><span class="n">ErrorCode</span><span class="p">(</span><span class="o">-</span><span class="mi">66</span><span class="p">))</span>
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">29.668</span> <span class="mi">30895</span> <span class="mi">30912</span> <span class="n">W</span> <span class="n">BpBinder</span><span class="p">:</span> <span class="n">Slow</span> <span class="n">Binder</span><span class="p">:</span> <span class="n">BpBinder</span> <span class="n">transact</span> <span class="n">took</span> <span class="mi">679</span> <span class="n">ms</span><span class="p">,</span> <span class="n">interface</span><span class="o">=</span><span class="n">android</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">keystore2</span><span class="o">.</span><span class="n">IKeystoreSecurityLevel</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="mi">2</span> <span class="n">oneway</span><span class="o">=</span><span class="n">false</span>
<span class="mi">08</span><span class="o">-</span><span class="mi">23</span> <span class="mi">11</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">29.670</span> <span class="mi">30895</span> <span class="mi">30912</span> <span class="n">I</span> <span class="n">AndroidKeyStoreTest</span><span class="p">:</span> <span class="n">key</span> <span class="n">attestation</span> <span class="k">with</span> <span class="n">device</span> <span class="n">IDs</span> <span class="ow">not</span> <span class="n">supported</span><span class="p">;</span> <span class="n">test</span> <span class="n">skippe</span>
</pre></div>
</div>
<p>代码处理流程</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>* cts/tests/tests/keystore/src/android/keystore/cts/KeyAttestationTest.java
  └── public void testRsaAttestation() throws Exception
      ├── int[] keySizes
      │   ├── 512
      │   ├── 768
      │   └── 1024
      ├── byte[][] challenges
      │   ├── new byte[0], // empty challenge
      │   ├── &quot;challenge&quot;.getBytes(), // short challenge
      │   └── new byte[128] // long challenge
      ├── int[] purposes
      │   ├── PURPOSE_SIGN | PURPOSE_VERIFY,
      │   └── PURPOSE_ENCRYPT | PURPOSE_DECRYPT,
      ├── String[][] encryptionPaddingModes
      │   ├── ENCRYPTION_PADDING_NONE
      │   ├── ENCRYPTION_PADDING_RSA_OAEP,
      │   ├── ENCRYPTION_PADDING_RSA_PKCS1,
      │   ├── ENCRYPTION_PADDING_RSA_OAEP,
      │   └── ENCRYPTION_PADDING_RSA_PKCS1,
      ├── String[][] signaturePaddingModes = {
      │   ├── SIGNATURE_PADDING_RSA_PKCS1,
      │   ├── SIGNATURE_PADDING_RSA_PSS,
      │   ├── SIGNATURE_PADDING_RSA_PKCS1,
      │   └── SIGNATURE_PADDING_RSA_PSS,
      ├── boolean[] devicePropertiesAttestationValues
      │   ├── true 
      │   └── false
      └── for (boolean devicePropertiesAttestation : devicePropertiesAttestationValues)
          └── for (int keySize : keySizes)
              └── for (byte[] challenge : challenges)
                  └── for (int purpose : purposes)
                      ├── if (isEncryptionPurpose(purpose))
                      │   └── testRsaAttestations(keySize, challenge, purpose, encryptionPaddingModes, devicePropertiesAttestation);
                      └── else
                          └── testRsaAttestations(keySize, challenge, purpose, signaturePaddingModes, devicePropertiesAttestation);
                              └── private void testRsaAttestations(int keySize, byte[] challenge, int purpose, String[][] paddingModes, boolean devicePropertiesAttestation) throws Exception 
                                  └── for (String[] paddings : paddingModes)
                                      ├── testRsaAttestation(challenge, true /* includeValidityDates */, keySize, purpose, paddings, devicePropertiesAttestation);
                                      │   └── private void testRsaAttestation(byte[] challenge, boolean includeValidityDates, int keySize, int purposes, String[] paddingModes, boolean devicePropertiesAttestation)
                                      │       ├── String keystoreAlias = &quot;test_key&quot;;
                                      │       ├── KeyGenParameterSpec.Builder builder = new KeyGenParameterSpec.Builder(keystoreAlias, purposes).setKeySize(keySize).setDigests(DIGEST_NONE, DIGEST_SHA256, DIGEST_SHA512).setAttestationChallenge(challenge).setDevicePropertiesAttestationIncluded(devicePropertiesAttestation);
                                      │       ├── if (isSignaturePurpose(purposes))
                                      │       │   └── builder.setSignaturePaddings(paddingModes);
                                      │       ├── generateKeyPair(KEY_ALGORITHM_RSA, builder.build());
                                      │       │   ├── KeyPairGenerator keyPairGenerator = KeyPairGenerator.getInstance(algorithm, &quot;AndroidKeyStore&quot;);
                                      │       │   ├── keyPairGenerator.initialize(spec);
                                      │       │   └── keyPairGenerator.generateKeyPair();
                                      │       ├── KeyStore keyStore = KeyStore.getInstance(&quot;AndroidKeyStore&quot;);
                                      │       ├── keyStore.load(null);
                                      │       ├── try
                                      │       │   ├── Certificate certificates[] = keyStore.getCertificateChain(keystoreAlias);
                                      │       │   ├── verifyCertificateChain(certificates, false /* expectStrongBox */);
                                      │       │   ├── X509Certificate attestationCert = (X509Certificate) certificates[0];
                                      │       │   ├── Attestation attestation = Attestation.loadFromCertificate(attestationCert);
                                      │       │   ├── checkRsaKeyDetails(attestation, keySize, purposes, ImmutableSet.copyOf(paddingModes));
                                      │       │   ├── checkKeyUsage(attestationCert, purposes);
                                      │       │   └── checkKeyIndependentAttestationInfo(challenge, purposes, startTime, includeValidityDates, devicePropertiesAttestation, attestation);
                                      │       └── finally
                                      │           └── keyStore.deleteEntry(keystoreAlias);
                                      └── testRsaAttestation(challenge, false /* includeValidityDates */, keySize, purpose, paddings, devicePropertiesAttestation);
</pre></div>
</div>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, zengjf.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
  

<script charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script>
<script>LA.init({id: "JjOE14XScyd75b2C",ck: "JjOE14XScyd75b2C"})</script>

<br/>
<script id="LA-DATA-WIDGET" crossorigin="anonymous" charset="UTF-8" src="https://v6-widget.51.la/v6/JjOE14XScyd75b2C/quote.js?theme=0&f=12&display=1,0,0,0,0,0,1,1"></script>



</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>